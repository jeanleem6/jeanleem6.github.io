<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <!-- Website mata -->
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<!-- Disable transformation -->
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<!-- Website description -->

<meta name="description" content="Mac下使用Homebrew安装ST/Nginx/MySQL/PHP" />


<!-- Website keywords -->

<meta name="keywords" content="server, Mac, nginx, mysql, php, Banksy7" />




<!-- Website rss -->

<link rel="alternate" href="/atom.xml" title="Banksy7" type="application/atom+xml">


<!-- Website favicon -->

<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=3.0.0" />


<!-- Canonical, good for google search engine -->
<link rel="canonical" href="https://jeanleem6.github.io/2016/11/21/Mac-Nginx-MySQL-PHP/" />

<!-- Fancybox styling -->

<link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />


<!-- MathJax (LaTeX) support -->


<!-- Theme styling -->
<link rel="stylesheet" type="text/css" href="/css/style.css?v=3.0.0" />

<!-- Analytics and push -->



  



<!-- LeanCloud Counter -->


<script>
  window.config = {"leancloud":{"app_id":null,"app_key":null,"server_url":null,"cdn":null},"toc":true,"fancybox":true,"latex":false};
</script>
  
  <title>Mac下使用Homebrew安装ST/Nginx/MySQL/PHP - Banksy7</title>

<meta name="generator" content="Hexo 7.2.0"></head>

<body>
  <div class="scrollPercentage"></div>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">Banksy7</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
    <a href="/">
      <li class="mobile-menu-item">
        
        
        首页              </li>
    </a>
    
    <a href="/archives/">
      <li class="mobile-menu-item">
        
        
        归档              </li>
    </a>
    
    <a href="/tags/">
      <li class="mobile-menu-item">
        
        
        标签              </li>
    </a>
    
    <a href="/about/">
      <li class="mobile-menu-item">
        
        
        关于              </li>
    </a>
    
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
      <div class="logo-wrapper">  
  <a href="/." class="logo">Banksy7</a>  
</div>  
  
<nav class="site-navbar">  
    
    <ul id="menu" class="menu">  
        
        <li class="menu-item">  
          <a class="menu-item-link" href="/">  
              
              
              首页  
              
          </a>  
        </li>  
        
        <li class="menu-item">  
          <a class="menu-item-link" href="/archives/">  
              
              
              归档  
              
          </a>  
        </li>  
        
        <li class="menu-item">  
          <a class="menu-item-link" href="/tags/">  
              
              
              标签  
              
          </a>  
        </li>  
        
        <li class="menu-item">  
          <a class="menu-item-link" href="/about/">  
              
              
              关于  
              
          </a>  
        </li>  
        
    </ul>  
    
</nav>  

    </header>
    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
  <header class="post-header">
    <h1 class="post-title">
      
      Mac下使用Homebrew安装ST/Nginx/MySQL/PHP
      
    </h1>

    <div class="post-meta">
      <span class="post-time">
        2016-11-21
      </span>
      
      
      
    </div>
  </header>

  
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8homebrew-cask%E5%AE%89%E8%A3%85sublime"><span class="toc-number">1.</span> <span class="toc-text">使用homebrew-cask安装sublime</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%99sublime%E6%8D%A2%E4%B8%BB%E9%A2%98"><span class="toc-number">1.1.</span> <span class="toc-text">给sublime换主题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Mysql"><span class="toc-number">2.</span> <span class="toc-text">安装Mysql</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85php"><span class="toc-number">3.</span> <span class="toc-text">安装php</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2019-03-01-updated"><span class="toc-number">3.1.</span> <span class="toc-text">* 2019.03.01 updated *</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%B8%E8%BD%BDphp"><span class="toc-number">3.2.</span> <span class="toc-text">卸载php</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Nginx"><span class="toc-number">4.</span> <span class="toc-text">安装Nginx</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%AB%E5%90%8D"><span class="toc-number">5.</span> <span class="toc-text">别名</span></a></li></ol>
    </div>
  </div>
  

  <div class="post-content">
    
    <h2 id="使用homebrew-cask安装sublime"><a href="#使用homebrew-cask安装sublime" class="headerlink" title="使用homebrew-cask安装sublime"></a>使用homebrew-cask安装sublime</h2><p>先安装cask, 使用cask可以安装一些应用程序，如QQ，迅雷，谷歌浏览器等，功能和App store差不多，个人觉得这个更好管理</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew cask <span class="comment"># 没有安装cask会自动安装，已经安装cask的，会跳出cask命令列表</span></span><br></pre></td></tr></table></figure>


<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Cask 常用命令</span></span><br><span class="line">brew cask search        <span class="comment">#列出所有可以被安装的软件</span></span><br><span class="line">brew cask search sublime    <span class="comment">#查找所有和sublime相关的应用</span></span><br><span class="line">brew cask list          <span class="comment">#列出所有通过cask安装的软件</span></span><br><span class="line">brew cask info sublime-text  <span class="comment">#查看 sublime 的信息</span></span><br><span class="line">brew cask install sublime-text  <span class="comment"># 安装sublime</span></span><br><span class="line">brew cask uninstall sublime-text   <span class="comment">#卸载sublime</span></span><br></pre></td></tr></table></figure>

<span id="more"></span>

<p>通常我们是不知道软件的全称的，比如安装sublime,我们可以先使用<code>brew cask serach</code>搜索：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">brew cask search sublime</span><br><span class="line">==&gt; Exact match</span><br><span class="line">caskroom/cask/sublime</span><br><span class="line">==&gt; Partial matches</span><br><span class="line">caskroom/cask/sublime-text               caskroom/cask/sublime-text</span><br></pre></td></tr></table></figure>

<p>从上面我们可以看出，要安装的sublime全称是sublime-text,我们使用<code>brew cask install sublime-text</code>来安装它</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew cask install sublime-text</span><br></pre></td></tr></table></figure>

<p>先给sublime text 3安装Package Control, 按住<code>control + `</code>,在弹出的命令行输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import urllib.request,os; pf = <span class="string">&#x27;Package Control.sublime-package&#x27;</span>; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); open(os.path.join(ipp, pf), <span class="string">&#x27;wb&#x27;</span>).write(urllib.request.urlopen( <span class="string">&#x27;http://sublime.wbond.net/&#x27;</span> + pf.replace(<span class="string">&#x27; &#x27;</span>,<span class="string">&#x27;%20&#x27;</span>)).<span class="built_in">read</span>())</span><br></pre></td></tr></table></figure>

<h3 id="给sublime换主题"><a href="#给sublime换主题" class="headerlink" title="给sublime换主题"></a>给sublime换主题</h3><p>然后<code>command + shift + p</code>,打开Package Control,输入<code>install</code>,选择<code>Package Control:Install Package</code>回车，在跳出的命令行输入选择<code>Material Theme</code>安装，然后按下图启用</p>
<p><img src="/2016/11/21/Mac-Nginx-MySQL-PHP/sublime_theme.png" alt="sublime Theme"></p>
<h2 id="安装Mysql"><a href="#安装Mysql" class="headerlink" title="安装Mysql"></a>安装Mysql</h2><p>先查找下mysql</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ brew search mysql</span><br><span class="line">automysqlbackup            mysql-cluster              mysql-sandbox</span><br><span class="line">mysql                      mysql-connector-c          mysql-search-replace</span><br><span class="line">mysql++                    mysql-connector-c++        mysqltuner</span><br><span class="line">homebrew/php/php53-mysqlnd_ms            homebrew/versions/mysql56</span><br><span class="line">homebrew/php/php54-mysqlnd_ms            Caskroom/cask/mysql-connector-python</span><br><span class="line">homebrew/php/php55-mysqlnd_ms            Caskroom/cask/mysqlworkbench</span><br><span class="line">homebrew/php/php56-mysqlnd_ms            Caskroom/cask/navicat-for-mysql</span><br><span class="line">homebrew/versions/mysql55                Caskroom/cask/sqlpro-for-mysql</span><br></pre></td></tr></table></figure>

<p>看一下mysql的版本信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ brew info mysql</span><br><span class="line">mysql: stable 5.7.16 (bottled)</span><br><span class="line">Open <span class="built_in">source</span> relational database management system</span><br><span class="line"><span class="comment"># 下面信息省略</span></span><br></pre></td></tr></table></figure>

<p>安装MySql</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install mysql</span><br></pre></td></tr></table></figure>

<p>设置MySql开机启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p ~/Library/LaunchAgents    <span class="comment"># 首先确认该目录是否存在，若已经存在不用执行本命令</span></span><br><span class="line"><span class="built_in">ln</span> -sfv /usr/local/opt/mysql/*.plist ~/Library/LaunchAgents</span><br><span class="line">launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist</span><br></pre></td></tr></table></figure>

<p>启动MySql服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql.server start</span><br></pre></td></tr></table></figure>

<p><strong>错误修复</strong></p>
<p>如果在启动过程中出现如下错误：<code>ERROR! The server quit without updating PID file</code> ，使用以下方法修复。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> -R 755 /usr/local/var/mysql</span><br><span class="line"><span class="built_in">rm</span> -Rf /usr/local/var/mysql/Your-Machine-Name.local.err</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注:将<code>Your-Machine-Name</code>替换为机器名称。</p>
</blockquote>
<p>MySql安全性设置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql_secure_installation</span><br><span class="line"></span><br><span class="line">Set root password? [Y/n] Y</span><br><span class="line">Remove anonymous <span class="built_in">users</span>? [Y/n] Y</span><br><span class="line">Disallow root login remotely? [Y/n] Y</span><br><span class="line">Remove <span class="built_in">test</span> database and access to it? [Y/n] Y</span><br><span class="line">Reload privilege tables now? [Y/n] Y</span><br></pre></td></tr></table></figure>

<p>好了，进入mysql看下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ mysql -u root -p</span><br><span class="line">Enter password:</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection <span class="built_in">id</span> is 4</span><br><span class="line">Server version: 5.7.16 Homebrew</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line">4 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure>

<p>使用Homebrew卸载MySql</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">brew uninstall mysql</span><br><span class="line">brew cleanup</span><br><span class="line">launchctl unload -w ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist</span><br><span class="line"><span class="built_in">rm</span> -Rf ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist</span><br></pre></td></tr></table></figure>

<h2 id="安装php"><a href="#安装php" class="headerlink" title="安装php"></a>安装php</h2><hr>
<h3 id="2019-03-01-updated"><a href="#2019-03-01-updated" class="headerlink" title="* 2019.03.01 updated *"></a><code>* 2019.03.01 updated *</code></h3><blockquote>
<p>Warning!<br>If you have existing PHP installations via Brew, you need to first cleanup your setup with our Upgrading Homebrew guide before continuing with this section.</p>
</blockquote>
<p>Up until the end of March 2018, all PHP related brews were handled by <code>Homebrew/php</code> tab, but that has been deprecated, so now we use what’s available in the <code>Homebrew/core</code> package. This should be a better maintained, but is a much less complete, set of packages.</p>
<p>Both <strong>PHP 5.6</strong> and <strong>PHP 7.0</strong> has been deprecated and removed from Brew <a target="_blank" rel="noopener" href="http://php.net/supported-versions.php">because they are out of support</a>, and while it’s <strong>not recommended for production</strong>, there are legitimate reasons to test these unsupported versions in a development environment.</p>
<p>Remember only <strong>PHP 7.1 through 7.3</strong> are officially supported by Brew so if you want to install <strong>PHP 5.6</strong> or <strong>PHP 7.0</strong> you will need to add this tap:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew tap exolnet/homebrew-deprecated</span><br></pre></td></tr></table></figure>

<p>We will proceed by installing various verions of PHP and using a simple script to switch between them as we need. Feel free to exclude any versions you don’t want to install.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ brew install php@5.6</span><br><span class="line">$ brew install php@7.0</span><br><span class="line">$ brew install php@7.1</span><br><span class="line">$ brew install php@7.2</span><br><span class="line">$ brew install php@7.3</span><br></pre></td></tr></table></figure>

<p>The first one will take a little bit of time as it has to install a bunch of brew dependencies. Subsequent PHP versions will install faster.</p>
<blockquote>
<p>Note:<br>You no longer have to <code>unlink</code> each version between installing PHP versions as they are not linked by default</p>
</blockquote>
<p>Also, you may have the need to tweak configuration settings of PHP to your needs. A common thing to change is the memory setting, or the <code>date.timezone</code> configuration. The <code>php.ini</code> files for each version of PHP are located in the following directories:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/etc/php/5.6/php.ini</span><br><span class="line">/usr/local/etc/php/7.0/php.ini</span><br><span class="line">/usr/local/etc/php/7.1/php.ini</span><br><span class="line">/usr/local/etc/php/7.2/php.ini</span><br><span class="line">/usr/local/etc/php/7.3/php.ini</span><br></pre></td></tr></table></figure>

<p>Let’s switch back to the first PHP version now:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew <span class="built_in">unlink</span> php@7.3 &amp;&amp; brew <span class="built_in">link</span> --force --overwrite php@5.6</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Info:<br>At this point, I strongly recommend closing <strong>ALL your terminal tabs and windows</strong>. This will mean opening a new terminal to continue with the next step. This is strongly recommended because some really strange path issues can arise with existing terminals (trust me, I have seen it!).</p>
</blockquote>
<p>Quick test that we’re in the correct version:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">php -v</span><br><span class="line"></span><br><span class="line">PHP 5.6.39 (cli) (built: Dec  7 2018 08:27:47)</span><br><span class="line">Copyright (c) 1997-2016 The PHP Group</span><br><span class="line">Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies</span><br><span class="line">    with Zend OPcache v7.0.6-dev, Copyright (c) 1999-2016, by Zend Technologies</span><br></pre></td></tr></table></figure>

<hr>
<p>安装php之前，请先用brew tap命令引入第三方的php库，brew仓库中没有php的安装包。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">brew update <span class="comment"># 安装软件前都要习惯的更新下brew源</span></span><br><span class="line">brew tap homebrew/dupes</span><br><span class="line">brew tap josegonzalez/homebrew-php</span><br></pre></td></tr></table></figure>

<p>现在<code>brew search php</code>就可以了，出来一堆版本的php，我们就安装php5.6版本吧。<br>可以先<code>brew options php56</code>看看你安装的时候要哪些选项，我选择了下面这些,因为后面我们会用nginx作为反向代理，所以就不要用–with-apache选项了，也不要添加–without-fpm选项</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install php56 --with-imap --with-tidy --with-debug --with-pgsql --with-mysql --with-fpm</span><br></pre></td></tr></table></figure>

<p>单独安装 php 扩展</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">brew install php56-apcu php56-intl php56-redis php56-uuid php56-zookeeper</span><br><span class="line">    php56-thrift php56-solr php56-ssh2 php56-gmagick php56-kafka php56-libevent</span><br><span class="line">    php56-imagick php56-msgpack php56-geoip php56-mcrypt php56-swoole</span><br><span class="line">    php56-scrypt php56-xdebug php56-yaf php56-yaml php56-xhprof</span><br><span class="line">    php56-memcache php56-memcached php56-gearman</span><br></pre></td></tr></table></figure>

<p>由于Mac自带了php和php-fpm，因此需要添加系统环境变量PATH来替代自带PHP版本,我们用的是zsh,所以放进.zshrc中,如果你用的shell是bash,那么可以把下面的信息写入到<code>~/.bash_profile</code>文件中，如果这个文件没有，你自己建一个就行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PATH=&quot;$(brew --prefix php56)/bin:$PATH&quot;&#x27;</span> &gt;&gt; ~/.zshrc  <span class="comment">#for php</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PATH=&quot;$(brew --prefix php56)/sbin:$PATH&quot;&#x27;</span> &gt;&gt; ~/.zshrc  <span class="comment">#for php-fpm</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PATH=&quot;/usr/local/bin:/usr/local/sbib:$PATH&quot;&#x27;</span> &gt;&gt; ~/.zshrc <span class="comment">#for other brew install soft</span></span><br><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure>
<p>设置开机启动php</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p ~/Library/LaunchAgents</span><br><span class="line"><span class="built_in">cp</span> /usr/local/opt/php56/homebrew.mxcl.php56.plist ~/Library/LaunchAgents/</span><br><span class="line">launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.php56.plist</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：如果要搭建帝国cms，请安装 <code>php56</code>，因为帝国cms 7.2版及之前的版本不支持 <code>php7</code>，但是 <code>php7</code> 之前的版本都可以。</p>
</blockquote>
<p>测试下效果</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># brew安装的php</span></span><br><span class="line">➜  ~ php -v</span><br><span class="line">PHP 7.0.12 (cli) (built: Oct 24 2016 00:06:38) ( NTS DEBUG )</span><br><span class="line">Copyright (c) 1997-2016 The PHP Group</span><br><span class="line">Zend Engine v3.0.0, Copyright (c) 1998-2016 Zend Technologies</span><br><span class="line"></span><br><span class="line"><span class="comment"># brew安装的php-fpm</span></span><br><span class="line">➜  ~ php-fpm -v</span><br><span class="line">PHP 7.0.12 (fpm-fcgi) (built: Oct 24 2016 00:06:45) (DEBUG)</span><br><span class="line">Copyright (c) 1997-2016 The PHP Group</span><br><span class="line">Zend Engine v3.0.0, Copyright (c) 1998-2016 Zend Technologies</span><br><span class="line"></span><br><span class="line"><span class="comment"># Mac自带的php, 我以前的项目有些依赖不支持php7,所以这个我是留着的，随时切换使用</span></span><br><span class="line">➜  ~ /usr/bin/php -v</span><br><span class="line">PHP 5.6.24 (cli) (built: Aug  8 2016 16:58:37)</span><br><span class="line">Copyright (c) 1997-2016 The PHP Group</span><br><span class="line">Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies</span><br><span class="line"></span><br><span class="line"><span class="comment"># Mac自带php-fpm</span></span><br><span class="line">➜  ~ /usr/sbin/php-fpm -v</span><br><span class="line">PHP 5.6.24 (fpm-fcgi) (built: Aug  8 2016 16:58:54)</span><br><span class="line">Copyright (c) 1997-2016 The PHP Group</span><br><span class="line">Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies</span><br><span class="line">➜  ~</span><br></pre></td></tr></table></figure>

<p>下面先来看下<code>php-fpm</code>的配置文件，路径在<code>/usr/local/etc/php/7.0/php-fpm.conf</code>，大家应该都猜的到。我们主要看下pid和log文件会放在哪里</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">13 [global]</span><br><span class="line">14 ; Pid file</span><br><span class="line">15 ; Note: the default prefix is /usr/local/var</span><br><span class="line">16 ; Default Value: none</span><br><span class="line">17 ;pid = run/php-fpm.pid</span><br><span class="line">18</span><br><span class="line">19 ; Error <span class="built_in">log</span> file</span><br><span class="line">20 ; If it<span class="string">&#x27;s set to &quot;syslog&quot;, log is sent to syslogd instead of being written</span></span><br><span class="line"><span class="string">21 ; in a local file.</span></span><br><span class="line"><span class="string">22 ; Note: the default prefix is /usr/local/var</span></span><br><span class="line"><span class="string">23 ; Default Value: log/php-fpm.log</span></span><br><span class="line"><span class="string">24 ;error_log = log/php-fpm.log</span></span><br></pre></td></tr></table></figure>

<p>自己看下上面的信息，去掉17行和24行前面的分号,使用<code>php-fpm -t</code>测试下配置是否正确,按提示信息是不管它也可以，默认就是在<code>/usr/local/var</code>路径下的，不过还是设置下吧；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">➜  7.0 php-fpm -t</span><br><span class="line">[24-Oct-2016 11:20:31] NOTICE: configuration file /usr/local/etc/php/7.0/php-fpm.conf <span class="built_in">test</span> is successful</span><br></pre></td></tr></table></figure>

<p>php-fpm的一些管理:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#测试php-fpm配置</span></span><br><span class="line">php-fpm -t</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动php-fpm</span></span><br><span class="line">php-fpm -D</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭php-fpm</span></span><br><span class="line"><span class="built_in">kill</span> -INT `<span class="built_in">cat</span> /usr/local/var/run/php-fpm.pid`</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启php-fpm</span></span><br><span class="line"><span class="built_in">kill</span> -USR2 `<span class="built_in">cat</span> /usr/local/var/run/php-fpm.pid`</span><br><span class="line"></span><br><span class="line"><span class="comment">#也可以用上文提到的brew命令来管理php-fpm</span></span><br><span class="line">brew services start|stop|restart php70</span><br><span class="line"></span><br><span class="line"><span class="comment">#还可以用这个命令来管理php-fpm</span></span><br><span class="line">php70-fpm start|stop|restart</span><br></pre></td></tr></table></figure>

<p>启动php-fpm之后，确保它正常运行监听9000端口：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ lsof -Pni4 | grep LISTEN | grep php</span><br><span class="line">php-fpm   18381  zjp    8u  IPv4 0xbca78421d968b30f      0t0  TCP 127.0.0.1:9000 (LISTEN)</span><br><span class="line">php-fpm   18382  zjp    0u  IPv4 0xbca78421d968b30f      0t0  TCP 127.0.0.1:9000 (LISTEN)</span><br><span class="line">php-fpm   18383  zjp    0u  IPv4 0xbca78421d968b30f      0t0  TCP 127.0.0.1:9000 (LISTEN)</span><br></pre></td></tr></table></figure>

<h3 id="卸载php"><a href="#卸载php" class="headerlink" title="卸载php"></a>卸载php</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">brew uninstall php70</span><br><span class="line">brew cleanup</span><br><span class="line">xcode-select --install <span class="comment"># An &quot;install&quot; window will appear. Click &quot;yes&quot; on all the things.</span></span><br><span class="line">brew install php70</span><br></pre></td></tr></table></figure>

<hr>
<p><code>* 2019.03.01 updated *</code></p>
<ul>
<li><p>Uninstall your existing Homebrew PHP version if it is the latest release from php.net</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew uninstall --force php56</span><br></pre></td></tr></table></figure>
</li>
<li><p>Update your formulas:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew update</span><br></pre></td></tr></table></figure>
</li>
<li><p>Fix any tap link errors:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew tap --repair</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h2 id="安装Nginx"><a href="#安装Nginx" class="headerlink" title="安装Nginx"></a>安装Nginx</h2><p>查找nginx</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew search nginx</span><br></pre></td></tr></table></figure>

<p>看下信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew info nginx</span><br></pre></td></tr></table></figure>

<p>安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install nginx</span><br></pre></td></tr></table></figure>

<p>安装信息记录下，用的到：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ brew install nginx</span><br><span class="line">==&gt; Auto-updated Homebrew!</span><br><span class="line">Updated 1 tap (homebrew/core).</span><br><span class="line">==&gt; New Formulae</span><br><span class="line">gitless</span><br><span class="line">==&gt; Updated Formulae</span><br><span class="line">fzf                                                                              gammu</span><br><span class="line"></span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/nginx-1.10.2.sierra.bottle.tar.gz</span><br><span class="line"><span class="comment">######################################################################## 100.0%</span></span><br><span class="line">==&gt; Pouring nginx-1.10.2.sierra.bottle.tar.gz</span><br><span class="line">==&gt; Using the sandbox</span><br><span class="line">==&gt; Caveats</span><br><span class="line">Docroot is: /usr/local/var/www</span><br><span class="line"></span><br><span class="line">The default port has been <span class="built_in">set</span> <span class="keyword">in</span> /usr/local/etc/nginx/nginx.conf to 8080 so that</span><br><span class="line">nginx can run without sudo.</span><br><span class="line"></span><br><span class="line">nginx will load all files <span class="keyword">in</span> /usr/local/etc/nginx/servers/.</span><br><span class="line"></span><br><span class="line">To have launchd start nginx now and restart at login:</span><br><span class="line">  brew services start nginx</span><br><span class="line">Or, <span class="keyword">if</span> you don<span class="string">&#x27;t want/need a background service you can just run:</span></span><br><span class="line"><span class="string">  nginx</span></span><br><span class="line"><span class="string">==&gt; Summary</span></span><br></pre></td></tr></table></figure>

<p>开机自启动nginx服务设置：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p ~/Library/LaunchAgents</span><br><span class="line"><span class="built_in">cp</span> /usr/local/Cellar/nginx/1.12.0_1/homebrew.mxcl.nginx.plist ~/Library/LaunchAgents/</span><br><span class="line">launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.nginx.plist</span><br></pre></td></tr></table></figure>

<p>配置非管理员开机nginx自动启动的权限和分组：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chown</span> root:wheel /usr/local/Cellar/nginx/1.12.0_1/bin/nginx</span><br><span class="line">sudo <span class="built_in">chmod</span> u+s /usr/local/Cellar/nginx/1.12.0_1/bin/nginx</span><br></pre></td></tr></table></figure>

<p>Nginx启动关闭命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#测试配置是否有语法错误</span></span><br><span class="line">nginx -t</span><br><span class="line"></span><br><span class="line"><span class="comment">#打开 nginx</span></span><br><span class="line">sudo nginx</span><br><span class="line"></span><br><span class="line"><span class="comment">#重新加载配置|重启|停止|退出 nginx</span></span><br><span class="line">nginx -s reload|reopen|stop|quit</span><br></pre></td></tr></table></figure>

<p>好了，来跑下nginx</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx</span><br></pre></td></tr></table></figure>

<p><img src="/2016/11/21/Mac-Nginx-MySQL-PHP/nginx_success.png" alt="Welcome to nginx!"></p>
<blockquote>
<p>到这里为止，我们已经安装完了<code>mysql php nginx</code>, 在安装php的时候添加了–with-mysql, 所以php操作mysql是没有问题的，现在我们就要配置nginx,让它监听php-fpm的进程，这样当用户打开浏览器访问的时候，身为反向代理的nignx就能把东西让php去执行了。</p>
</blockquote>
<p>接下来，我们要配置<code>nginx.conf</code>文件，创建一个<code>php-fpm</code>文件（监听php-fpm）, 还要约定下将<code>nginx.pid</code>文件，log日志，以及以后我们要配置的站点.conf的路径，我们的路径约定还是按照brew默认的目录来设置,如下:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># nginx.conf,已经被创建好了，我们一会要更改下</span></span><br><span class="line">/usr/local/etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># php-fpm,这个我们就放在和nginx.conf一样的路径下吧，这个要我们自己创建</span></span><br><span class="line">/usr/local/etc/nginx/php-fpm</span><br><span class="line"></span><br><span class="line"><span class="comment"># 日志文件放在/usr/local/var/log/nginx中，默认已经有了access.log和error.log文件了</span></span><br><span class="line">/usr/local/var/log/nginx/</span><br><span class="line"></span><br><span class="line"><span class="comment"># nginx.pid文件,放在/usr/local/var/run/下面，和php-fpm.pid放一堆</span></span><br><span class="line">/usr/local/var/run/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以后要配置的站点.conf, 我们就放在/usr/local/etc/nginx/servers/下面，这个servers文件夹本身就存在的</span></span><br><span class="line">/usr/local/etc/nginx/servers/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 站点的根目录,也就用brew给我们设置的吧</span></span><br><span class="line">/usr/local/var/www/</span><br></pre></td></tr></table></figure>

<p>下面我们先来修改nginx.conf, 用vim打开，把下面的信息覆盖nginx.conf, <code>vim /usr/local/etc/nginx/nginx.conf</code>, 如果你不习惯vim, 那就用sublime打开吧</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">error_log   /usr/local/var/log/nginx/error.log debug;</span><br><span class="line">pid        /usr/local/var/run/nginx.pid;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  256;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    log_format  main  <span class="string">&#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span></span><br><span class="line">                      <span class="string">&#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span></span><br><span class="line">                      <span class="string">&#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    access_log  /usr/local/var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line">    port_in_redirect off;</span><br><span class="line"></span><br><span class="line">    include /usr/local/etc/nginx/servers/*;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接下来，将下面的信息放入到php-fpm文件中，<code>vim /usr/local/etc/nginx/php-fpm</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">location ~ \.php$ &#123;</span><br><span class="line">    try_files                   <span class="variable">$uri</span> = 404;</span><br><span class="line">    fastcgi_pass                127.0.0.1:9000;</span><br><span class="line">    fastcgi_index               index.php;</span><br><span class="line">    fastcgi_intercept_errors    on;</span><br><span class="line">    include /usr/local/etc/nginx/fastcgi.conf;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ok, 下面就能配置站点了，先到<code>/usr/local/var/www</code>目录下建立站点根目录，就叫做default吧，然后在里面建立个info.php,内容就放phpinfo()函数就行.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /usr/local/var/www/default</span><br><span class="line">vi /usr/local/var/www/default/info.php <span class="comment">#输入 &lt;?php  phpinfo(); ?&gt;</span></span><br></pre></td></tr></table></figure>

<p>最后，去创建站点.conf文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/etc/nginx/servers/default.conf</span><br></pre></td></tr></table></figure>

<p>输入下面的内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  localhost;</span><br><span class="line">    root         /usr/local/var/www/default;</span><br><span class="line"></span><br><span class="line">    access_log  /usr/local/var/log/nginx/default.access.log  main;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        index  index.html index.htm index.php;</span><br><span class="line">        autoindex   on;</span><br><span class="line">        include     /usr/local/etc/nginx/php-fpm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    error_page  404     /404.html;</span><br><span class="line">    error_page  403     /403.html;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试下配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">➜  servers sudo nginx -t</span><br><span class="line">nginx: the configuration file /usr/local/etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /usr/local/etc/nginx/nginx.conf <span class="built_in">test</span> is successful</span><br></pre></td></tr></table></figure>

<p>然后开启php-fpm,已经开启的就不用开了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php-fpm -D</span><br></pre></td></tr></table></figure>

<p>开启nginx服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx <span class="comment"># 已经开启的用sudo nginx -s reload 重启下</span></span><br></pre></td></tr></table></figure>

<p>浏览器打开<a target="_blank" rel="noopener" href="http://localhost/info.php%E6%B5%8B%E8%AF%95%E4%B8%8B">http://localhost/info.php测试下</a></p>
<p><img src="/2016/11/21/Mac-Nginx-MySQL-PHP/php_info.png" alt="php.info"></p>
<h2 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h2><p>上面的php-fpm关闭和重启的命令有点长，我们给它做个别名，在你的个人主目录下先建立一个<code>.aliases</code>文件，然后放入下面的内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> fpm.start=<span class="string">&#x27;php-fpm -D&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> fpm.stop=<span class="string">&#x27;kill -INT `cat /usr/local/var/run/php-fpm.pid`&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> fpm.restart=<span class="string">&#x27;kill -USR2 `cat /usr/local/var/run/php-fpm.pid`&#x27;</span></span><br><span class="line"><span class="built_in">alias</span> fpm.status=<span class="string">&#x27;lsof -Pni4 | grep LISTEN | grep php-fpm&#x27;</span></span><br></pre></td></tr></table></figure>

<p>然后</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;source ~/.aliases&#x27;</span> &gt;&gt; ~/.zshrc</span><br><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果执行命令（如：<code>php-fpm -D</code>）时报错，很多情况可以通过在命令前加 <code>sudo</code> 解决。</p>
</blockquote>
<p>本文结束。</p>

    
  </div>

  
  <!-- Post Copyright -->

    

  

  
  <footer class="post-footer">
    
    <div class="post-tags">
      
      <a href="/tags/server/">server</a>
      
      <a href="/tags/Mac/">Mac</a>
      
      <a href="/tags/nginx/">nginx</a>
      
      <a href="/tags/mysql/">mysql</a>
      
      <a href="/tags/php/">php</a>
      
    </div>
    
      
  <nav class="post-nav">  
      
      <a class="prev" href="/2016/11/22/mysql-shell/">  
        <i class="iconfont icon-left"></i>  
        <span class="prev-text nav-default">Mysql Shell</span>  
        <span class="prev-text nav-mobile">上一篇</span>  
      </a>  
      
      
      <a class="next" href="/2016/11/20/Mac-Homebrew-ZSH-Node-Npm/">  
        <span class="next-text nav-default">Mac下安装Homebrew/ZSH/Node/NPM</span>  
        <span class="prev-text nav-mobile">下一篇</span>  
        <i class="iconfont icon-right"></i>  
      </a>  
      
  </nav>  
  

  </footer>
  

</article>
        </div>
          
  <div class="comments" id="comments">  
      
      <div id="utterances-container"></div>  
      
  </div>  
  

      </div>
    </main>
    <footer id="footer" class="footer">
      <!-- Social Links -->

<div class="social-links">
  
  
  
  
  <a href="mailto:jhlee007@gmail.com" class="iconfont icon-email" title="email"></a>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <a target="_blank" rel="noopener" href="https://github.com/jeanleem6" class="iconfont icon-github" title="github"></a>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

  
  <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
  
</div>



<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 -
    <a class="theme-link" target="_blank" rel="noopener" href="https://github.com/zeed-w-beez/hexo-theme-even">Even</a>
  </span>
  <span class="division">|</span>
  <span class="hosting-info">
    footer.hosting
  </span>

  <span class="copyright-year">
    <span>
      
      &copy;
      
      2016 - 2024      
    </span>

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>

    <span class="author">Banksy7</span>
  </span>

</div>
    </footer>
    <div class="back-to-top" id="back-to-top"> <i class="iconfont icon-up"></i> </div>
  </div>
    
    
    
    
    
  
<script>
  var container = document.getElementById('utterances-container');
  var script = document.createElement('script');
  script.src = 'https://utteranc.es/client.js';
  script.setAttribute('repo', 'jeanleem6/store-hexo-comments');
  script.setAttribute('issue-term', 'title');
  script.setAttribute('theme', 'github-light');
  script.setAttribute('label', 'utterances');
  script.crossorigin = 'anonymous';
  script.async = true;

  container.appendChild(script);
</script>
  
    
  

  







<script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>



<script type="text/javascript" src="/lib/slideout/slideout.js"></script>



<script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>



  <script type="text/javascript" src="/js/src/even.js?v=3.0.0"></script>
</body>

</html>